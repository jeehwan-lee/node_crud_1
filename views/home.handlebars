<main class="container mx-auto my-4">
  <section class="bg-white shadow-md rounded p-4">
    <div class="flex w-full items-center justify-center">
      <div class="flex w-9/12 items-center justify-between pb-3">
        <h2 class="text-xl font-semibold mb-4">게시글</h2>
        <button
          class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"
          onclick="location.href='/post/write'"
        >글쓰기
        </button>
      </div>
    </div>

    <div class="flex items-center justify-center mb-4">
      <input
        type="text"
        class="w-9/12 px-4 py-2 border border-gray-300 focus:outline-none rounded-xl"
        placeholder="검색어를 입력하세요..."
      />
    </div>

    {{#each posts}}

      <div class="flex items-center justify-center mb-6">
        <div class="rounded-xl border p-5 shadow-md w-9/12 bg-white">
          <div class="flex w-full items-center justify-between border-b pb-3">
            <div class="flex items-center space-x-3">

              <div class="text-lg font-bold text-slate-700">{{writer}}</div>
            </div>
            <div class="flex items-center space-x-8">
              <div class="text-xs text-neutral-500">{{createdDt}}</div>
            </div>
          </div>

          <div class="mt-4 mb-6">
            <div class="mb-3 text-xl font-bold">
              <a
                href="/post/detail/{{id}}"
                class="text-blue-500 font-semibold"
              >{{title}}</a>
            </div>
            <div class="text-sm text-neutral-600">{{content}}</div>
          </div>

          <div>
            <div class="flex items-center justify-between text-slate-500">
              <div class="flex space-x-4 md:space-x-4">
                <div
                  class="flex items-center transition hover:text-slate-600"
                  onclick="updateHearts({{id}});"
                >
                  <i class="fas fa-heart text-red-500 mr-2 cursor-pointer"></i>
                  <span>{{hearts}}</span>
                </div>
                <div class="flex items-center transition hover:text-slate-600">
                  <i
                    class="fas fa-comments text-blue-500 mr-2 cursor-pointer"
                  ></i>
                  <span>{{reflyCount}}</span>
                </div>
                <div class="flexitems-center transition hover:text-slate-600">
                  <i class="fas fa-eye mr-1 cursor-pointer"></i>
                  <span>{{hits}}</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    {{/each}}
  </section>
</main>

<script>
  function updateHearts(postId) { window.location.reload();
  fetch('http://localhost:3000/post/updateHearts', { method : "POST", headers:
  {"Content-Type": "application/json" }, body: JSON.stringify({id: postId}) } )
  }

</script>